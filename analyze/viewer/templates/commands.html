{% extends "base.html" %}

{% block content %}
<h2 class="text-light">Command Outputs</h2>

<p class="text-light text-center">
  This page shows collected command output (stdout and stderr).
</p>

<div class="row mb-3 justify-content-center align-items-end">
  <div class="col-md-10">
    <form method="get" class="d-flex gap-2">
      <input
        type="text"
        name="q"
        placeholder="Filter by command (e.g. lsmod, docker, ps)"
        value="{{ search_query|default('') }}"
        class="form-control"
      >
      <button type="submit" class="btn btn-primary">
        Filter
      </button>
    </form>
  </div>
</div>

{% if search_query %}
  <p class="text-light">
    Showing results for command filter:
    <strong>{{ search_query }}</strong>
  </p>
{% endif %}

{% if entries %}
  {% for e in entries %}
    <div class="mb-4">
      <h4 class="text-light">
        {{ e.category }} ({{ e.collection_name }})
      </h4>

      <div class="mb-1">
        <strong class="text-light">Command:</strong>
        <span class="mono text-light">{{ e.commandline }}</span>
      </div>

      <pre class="mono bg-dark text-light p-2 rounded language-shell"
           style="max-height: 400px; overflow: auto;">
{{ e.output }}
      </pre>
    </div>
  {% endfor %}
{% else %}
  <p class="text-light">No command output found.</p>
{% endif %}

{% endblock %}

