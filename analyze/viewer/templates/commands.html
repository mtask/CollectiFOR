{% extends "base.html" %}

{% block content %}
<h2>Command Outputs</h2>

<p>
  This page shows collected command output (stdout and stderr).
</p>

<!-- Search -->
<form method="get" class="mb-3">
  <input
    type="text"
    name="q"
    placeholder="Filter by command (e.g. lsmod, docker, ps)"
    value="{{ search_query|default('') }}"
  >
  <button type="submit">Filter</button>
</form>

{% if search_query %}
  <p>
    Showing results for command filter:
    <strong>{{ search_query }}</strong>
  </p>
{% endif %}

{% if entries %}
  {% for e in entries %}
    <div style="margin-bottom: 2em;">
      <h4>
        {{ e.category }}
      </h4>

      <div>
        <strong>Command:</strong>
        <span class="mono">{{ e.commandline }}</span>
      </div>

      <pre class="mono"
           style="max-height: 400px; overflow: auto;
                  border: 1px solid #ccc;
                  padding: 10px;
                  background: #f8f8f8;">
{{ e.output }}
      </pre>
    </div>
  {% endfor %}
{% else %}
  <p>No command output found.</p>
{% endif %}

{% endblock %}
